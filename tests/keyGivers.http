### these tests use https://marketplace.visualstudio.com/items?itemName=humao.rest-client vscode plugin

### Global variables
@url = http://localhost:3001
@token = {{login.response.body.data.token}}
@keyGiverId = {{keyGivers.response.body.data.keyGivers[0].id}}

### Auth Api
### Login - Soldato
# @name login
POST {{url}}/api/auth/login
content-type: application/json

{
    "role": "Soldato",
    "password": "test1234"
}

### Login - Caporegime
# @name login
POST {{url}}/api/auth/login
content-type: application/json

{
    "role": "Caporegime",
    "password": "test1234"
}

### Login - Consigliore
# @name login
POST {{url}}/api/auth/login
content-type: application/json

{
    "role": "Consigliore",
    "password": "test1234"
}

### Logout
# @name login
GET {{url}}/api/auth/logout
Authorization: Bearer {{token}}

### keyGivers Api
### get all keyGivers
# @name keyGivers
GET {{url}}/api/keygivers
Authorization: Bearer {{token}}

### get keyGiver details
GET {{url}}/api/keygivers/{{keyGiverId}}
Authorization: Bearer {{token}}

### get keyGiver details - bad id
GET {{url}}/api/keygivers/6345d568ae474b461be9581c
Authorization: Bearer {{token}}

### add new keyGiver
POST {{url}}/api/keygivers
Authorization: Bearer {{token}}
content-type: application/json

{
    "name": "kluczek1",
    "respawnTime": 20
}

### update keyGiver
PATCH {{url}}/api/keygivers/{{keyGiverId}}
Authorization: Bearer {{token}}
content-type: application/json

{
    "name": "kluczek3",
    "respawnTime": 24,
    "description": "Some description2"
}

### delete keyGiver
DELETE {{url}}/api/keygivers/{{keyGiverId}}
Authorization: Bearer {{token}}

### delete keyGiver - bad id
DELETE {{url}}/api/keygivers/6345d568ae474b
Authorization: Bearer {{token}}

### add new timestamp
PATCH {{url}}/api/keygivers/addtimestamp/{{keyGiverId}}
Authorization: Bearer {{token}}
content-type: application/json

{
    "date": "Tue, 30 Apr 2023 23:00:00 GMT",
    "keyName": "duzy ciezki klucz"
}

### add new timestamp - bad date format
PATCH {{url}}/api/keygivers/addtimestamp/{{keyGiverId}}
Authorization: Bearer {{token}}
content-type: application/json

{
    "date": "invalid date",
    "keyName": "duzy ciezki klucz"
}